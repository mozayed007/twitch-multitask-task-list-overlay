var Et=w=>{throw TypeError(w)};var ht=(w,x,M)=>x.has(w)||Et("Cannot "+M);var o=(w,x,M)=>(ht(w,x,"read from private field"),M?M.call(w):x.get(w)),p=(w,x,M)=>x.has(w)?Et("Cannot add the same private member more than once"):x instanceof WeakSet?x.add(w):x.set(w,M),m=(w,x,M,ke)=>(ht(w,x,"write to private field"),ke?ke.call(w,M):x.set(w,M),M),d=(w,x,M)=>(ht(w,x,"access private method"),M);var mt=(w,x,M,ke)=>({set _(xe){m(w,x,xe,M)},get _(){return o(w,x,ke)}});(function(){"use strict";var Re,xt,he,H,Pt,Z,oe,L,Me,ie,Ae,A,re,ne,Se,Te,ae,It,Mt,At,D,we,De,me,Oe,U,F,O,V,Q,Y,z,B,pe,fe,_e,Ne,$e,k,Dt,pt,Ot,ee,Ze,et,ze,qt,Ut,Be,Ft,C,je,P,qe,Ve,dt,Ce,Ye,S,Ht,zt,tt,ft,Bt,Rt,gt,_t,yt,Ee,Nt,E,We,I,Ue,Je,ut,Le,Ke,$,jt,Vt,Yt,Wt,st,ot,Jt,Kt,Gt,kt,ge,le,G,R,W,Fe,He,b,Xt,Qt,Zt,es,ts,ss,vt,os,is,it,rs,rt,ns,nt;let w,x,M=!1;const ke=getComputedStyle(document.documentElement).getPropertyValue("--card-gap-between").slice(0,-2);function xe(){const e=document.querySelector(".task-wrapper").clientHeight,t=document.querySelector(".task-container.primary"),s=t.scrollHeight,i=document.querySelector(".task-container.secondary");if(s>e&&!M){i.style.display="block";const n=_settings.scrollSpeed.toString();let a=parseInt(n,10),r=s+parseInt(ke,10)*2,u={duration:r/a*1e3,iterations:1,easing:"linear"},g=[{transform:"translateY(0)"},{transform:`translateY(-${r}px)`}],h=[{transform:"translateY(0)"},{transform:`translateY(-${r}px)`}];w=t.animate(g,u),x=i.animate(h,u),M=!0,ls()}else s<=e&&(i.style.display="none",as())}function as(){w&&w.cancel(),x&&x.cancel(),M=!1}function ls(){w&&(w.addEventListener("finish",bt),w.addEventListener("cancel",bt))}function bt(){M=!1,xe()}function at(l,e){if(l.innerText===e)return;const t=l.animate([{opacity:1},{opacity:0}],{duration:350,fill:"forwards",easing:"ease-out"});t.onfinish=()=>{l.textContent=e,l.animate([{opacity:0},{opacity:1}],{duration:350,fill:"forwards",easing:"ease-in"})}}function cs(l){const e=document.querySelector(":root");for(let[t,s]of Object.entries(l))t.includes("FontFamily")&&ds(s),e.style.setProperty(us(t),s)}function ds(l){window.WebFont.load({google:{families:[`${l}:100,400,700`]}})}function us(l){return`--${l.replace(/([A-Z])/g,"-$1").toLowerCase()}`}class St{constructor(e,t){this.username=this.validateUsername(e),this.userColor=(t==null?void 0:t.userColor)||"",this.tasks=[]}validateUsername(e){if(typeof e!="string")throw new Error("Username must be of type string");if(e=e.trim(),e.length===0)throw new Error("Username invalid");return e}addTask(e){return this.tasks.push(e),e}editTask(e,t){let s=this.getTask(e);return s?(s.setDescription(t),s):null}completeTask(e){let t=this.getTask(e);return t?(t.setCompletionStatus(!0),t):null}setFocusedTask(e){let t=this.getTask(e);return t?(this.tasks.forEach(s=>{s.setFocusStatus(!1)}),t.setFocusStatus(!0),t):null}deleteTask(e){const t=[].concat(e).filter(i=>this.validTaskIndex(i)),s=[];return this.tasks=this.tasks.filter((i,n)=>t.includes(n)?(s.push(i),!1):!0),s}removeCompletedTasks(){const e=[];return this.tasks=this.tasks.filter(t=>t.isComplete()?(e.push(t),!1):!0),e}getTask(e){return this.validTaskIndex(e)?this.tasks[e]:null}getTasks(){return this.tasks}validTaskIndex(e){return!(typeof e!="number"||isNaN(e)||e<0||e>=this.tasks.length)}}class Tt{constructor(e){p(this,Re);this.description=this.validateDescription(e),this.id=d(this,Re,xt).call(this),this.completionStatus=!1,this.focusStatus=!1}validateDescription(e){if(typeof e!="string")throw new Error("Task description must be of type string");if(e=e.trim(),e.length===0)throw new Error("Task description invalid");return e}setDescription(e){this.description=this.validateDescription(e)}isComplete(){return this.completionStatus}setCompletionStatus(e){if(typeof e!="boolean")throw new Error("Completion status must be of type boolean");this.completionStatus=e,this.isFocused()&&this.isComplete()&&this.setFocusStatus(!1)}isFocused(){return this.focusStatus}setFocusStatus(e){if(typeof e!="boolean")throw new Error("Focus status must be of type boolean");this.focusStatus=e}}Re=new WeakSet,xt=function(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0"),a=String(e.getMilliseconds()).padStart(3,"0"),r=Math.floor(Math.random()*1e4);return`${t}${s}${i}${n}${a}${r}`};class hs{constructor(e="userList"){p(this,H);p(this,he);m(this,he,e),this.tasksCompleted=0,this.totalTasks=0,this.users=d(this,H,Pt).call(this)}getUser(e){return this.users.find(t=>t.username===e)}getAllUsers(){return this.users}createUser(e,t){if(this.getUser(e))throw new Error(`${e} already exists`);const s=new St(e,t);return this.users.push(s),s}addUserTasks(e,t){const s=this.getUser(e);if(!s)throw new Error(`${e} does not exist`);const i=[].concat(t),n=[];return i.forEach(a=>{n.push(s.addTask(new Tt(a))),this.totalTasks++}),d(this,H,Z).call(this),n}editUserTask(e,t,s){const i=this.getUser(e);if(!i)throw new Error(`${e} has no tasks`);const n=i.editTask(t,s);if(!n)throw new Error(`Task ${t} not found`);return d(this,H,Z).call(this),n}focusUserTask(e,t){const s=this.getUser(e);if(!s)throw new Error(`User ${e} not found`);const i=s.setFocusedTask(t);if(!i)throw new Error(`Task ${t} not found`);return d(this,H,Z).call(this),i}completeUserTasks(e,t){const s=this.getUser(e);if(!s)throw new Error(`User ${e} not found`);const i=[].concat(t).reduce((n,a)=>{const r=s.getTask(a);return r&&(r.isComplete()||(r.setCompletionStatus(!0),this.tasksCompleted++),n.push(r)),n},[]);return d(this,H,Z).call(this),i}deleteUserTasks(e,t){const s=this.getUser(e);if(!s)throw new Error(`User ${e} not found`);const i=[].concat(t),n=s.deleteTask(i);return s.getTasks().length===0&&this.deleteUser(e),this.decreaseTaskCount(n),d(this,H,Z).call(this),n}checkUserTasks(e,t="incomplete"){const s=this.getUser(e);if(!s)return new Map;const i=new Map;return s.getTasks().forEach((n,a)=>{t==="incomplete"&&!n.isComplete()&&i.set(a,n),t==="complete"&&n.isComplete()&&i.set(a,n)}),i}clearUserList(){this.users=[],this.tasksCompleted=0,this.totalTasks=0,d(this,H,Z).call(this)}clearDoneTasks(){let e=[];for(let t=this.users.length-1;t>=0;t--){const s=this.users[t],i=s.removeCompletedTasks();e=e.concat(i),s.getTasks().length===0&&this.users.splice(t,1)}return this.decreaseTaskCount(e),d(this,H,Z).call(this),e}deleteUser(e){const t=this.users.findIndex(n=>RegExp(`^${e}`,"i").test(n.username));if(t===-1)throw new Error(`${e} not found`);const s=this.users[t],i=this.users.splice(t,1)[0];return this.decreaseTaskCount(i.getTasks()),d(this,H,Z).call(this),s}decreaseTaskCount(e){e.forEach(t=>{t.isComplete()&&this.tasksCompleted--,this.totalTasks--})}}he=new WeakMap,H=new WeakSet,Pt=function(){const e=[];let t=localStorage.getItem(o(this,he));return t?JSON.parse(t).forEach(s=>{const i=new St(s.username,{userColor:s.userColor});s.tasks.map(n=>{const a=i.addTask(new Tt(n.description));this.totalTasks++,n.completionStatus&&(a.setCompletionStatus(n.completionStatus),this.tasksCompleted++),n.focusStatus&&a.setFocusStatus(n.focusStatus)}),e.push(i)}):localStorage.setItem(o(this,he),JSON.stringify(e)),e},Z=function(){localStorage.setItem(o(this,he),JSON.stringify(this.users))};const ms=document.getElementById("audioSample");class ps{constructor(e){p(this,oe,null);p(this,L);p(this,Me);p(this,ie);p(this,Ae);this.userList=new hs(e),cs(_styles),m(this,L,_settings.languageCode),m(this,Me,_settings.maxTasksPerUser),m(this,ie,_settings.headerFeature),m(this,Ae,_settings.headerCustomText)}render(){this.renderTaskList(),this.renderTaskHeader()}renderTaskList(){const e=document.getElementById("task-list-container"),t=this.userList.users.length;if(e.classList.remove("minimized","single-item","expanded"),t===0){e.classList.add("minimized");return}else t===1?e.classList.add("single-item"):t>=5&&e.classList.add("expanded");const s=document.createDocumentFragment();this.userList.getAllUsers().forEach(c=>{const u=wt(c),g=u.querySelector("ol");c.tasks.forEach(h=>{const f=document.createElement("li");f.classList.add("task"),f.dataset.taskId=`${h.id}`,f.innerText=h.description,h.isComplete()&&f.classList.add("done"),h.isFocused()&&f.classList.add("focus"),g.appendChild(f)}),s.appendChild(u)});const i=s.cloneNode(!0),n=document.querySelector(".task-container.primary");n.innerHTML="",n.appendChild(i);const a=s.cloneNode(!0),r=document.querySelector(".task-container.secondary");r.innerHTML="",r.appendChild(a),xe()}renderTaskHeader(){this.renderTaskCount(),o(this,ie).toLowerCase()==="timer"?this.renderTimer():o(this,ie).toLowerCase()==="commands"?this.renderCommandTips():o(this,ie).toLowerCase()==="text"&&this.renderCustomText(o(this,Ae))}renderTaskCount(){let e=this.userList.tasksCompleted,t=this.userList.totalTasks;const s=document.querySelector(".task-count");s.innerText=`${e}/${t}`}renderTimer(){document.querySelector(".timer").classList.remove("hidden")}startTimer(e=0,t=10){o(this,oe)&&clearInterval(o(this,oe));const s=document.querySelector(".timer"),i=s.querySelector(".timer-title"),n=s.querySelector(".timer-countdown");let a=e*60;at(i,"Focus");let r=!0;const c=()=>{const u=Math.floor(a/60).toString().padStart(2,"0"),g=(a%60).toString().padStart(2,"0");n.textContent=`${u}:${g}`,a===0?(clearInterval(o(this,oe)),at(i,"Break"),n.textContent="00:00",ms.play(),a=t*60,r&&(m(this,oe,setInterval(c,1e3)),r=!1)):a--};m(this,oe,setInterval(c,1e3))}renderCommandTips(){const e=["!task","!edit","!done","!delete","!check","!help"],t=document.querySelector(".command-tips");t.classList.remove("hidden");let s=0;setInterval(()=>{const i=t.querySelector(".command-code");at(i,e[s]),s=(s+1)%e.length},6e3)}renderCustomText(e){document.querySelector(".custom-header").classList.remove("hidden"),document.querySelector(".custom-text").textContent=e}chatHandler(e,t,s,i,n){t=`!${t.toLowerCase()}`;let a="",r="";try{if(fs(i))if(o(this,ie).toLowerCase()==="timer"&&_adminConfig.commands.timer.includes(t)){const[c,u]=s.split("/"),g=parseInt(c,10),h=parseInt(u,10)||10;if(isNaN(g)||g<0||isNaN(h)||h<0)throw new Error("Invalid timer duration");return this.startTimer(g,h),a=_adminConfig.responseTo[o(this,L)].timer+" ‚è≤Ô∏è",r=c,te(a,e,r)}else{if(_adminConfig.commands.clearList.includes(t))return this.userList.clearUserList(),this.clearListFromDOM(),a=_adminConfig.responseTo[o(this,L)].clearList,te(a,e,r);if(_adminConfig.commands.clearDone.includes(t))return this.userList.clearDoneTasks().forEach(({id:u})=>{this.deleteTaskFromDOM(u)}),a=_adminConfig.responseTo[o(this,L)].clearDone,te(a,e,r);if(_adminConfig.commands.clearUser.includes(t)){const c=this.userList.deleteUser(s);return this.deleteUserFromDOM(c),r=c.username,a=_adminConfig.responseTo[o(this,L)].clearUser,te(a,e,r)}}if(_userConfig.commands.addTask.includes(t)){if(!i.broadcaster)return te("üìã Use !backlog add [task] to manage your personal tasks!",e,"",!1);if(s==="")throw new Error("Task description is empty");let c=this.userList.getUser(e)||this.userList.createUser(e,{userColor:n.userColor});const u=s.split(", ");c.getTasks().length+u.length>parseInt(o(this,Me).toString(),10)?a=_userConfig.responseTo[o(this,L)].maxTasksAdded:(this.userList.addUserTasks(e,u).forEach(h=>{this.addTaskToDOM(c,h)}),r=u.map(h=>`üìù "${h}"`).join(", ").replace(/,([^,]*)$/," &$1"),a=_userConfig.responseTo[o(this,L)].addTask)}else if(_userConfig.commands.editTask.includes(t)){if(!i.broadcaster)return te("üìã Use !backlog commands to manage your personal tasks!",e,"",!1);const c=s.search(new RegExp("(?<=\\d)\\s"));if(c===-1)throw new Error("Task number or description format is invalid");const u=s.slice(0,c),g=s.slice(c+1),h=this.userList.editUserTask(e,ve(u),g);this.editTaskFromDOM(h),r=u,a=_userConfig.responseTo[o(this,L)].editTask}else if(_userConfig.commands.focusTask.includes(t)){const c=ve(s),u=this.userList.focusUserTask(e,c);this.focusTaskFromDOM(e,u.id),r=(c+1).toString(),a=_userConfig.responseTo[o(this,L)].focusTask}else if(_userConfig.commands.finishTask.includes(t)){const c=s.split(",").reduce((g,h)=>(ve(h)>=0&&g.push(ve(h)),g),[]),u=this.userList.completeUserTasks(e,c);u.forEach(({id:g})=>{this.completeTaskFromDOM(g)}),u.length===0?a=_userConfig.responseTo[o(this,L)].noTaskFound:(r=u.map(g=>`‚úÖ "${g.description}"`).join(", ").replace(/,([^,]*)$/," &$1"),a=_userConfig.responseTo[o(this,L)].finishTask)}else if(_userConfig.commands.deleteTask.includes(t))if(r=s,s.toLowerCase()==="all"){const c=this.userList.deleteUser(e);this.deleteUserFromDOM(c),a=_userConfig.responseTo[o(this,L)].deleteAll}else{const c=s.split(",").reduce((g,h)=>(ve(h)>=0&&g.push(ve(h)),g),[]),u=this.userList.deleteUserTasks(e,c);u.forEach(({id:g})=>{this.deleteTaskFromDOM(g)}),u.length===0?a=_userConfig.responseTo[o(this,L)].noTaskFound:a=_userConfig.responseTo[o(this,L)].deleteTask}else if(_userConfig.commands.check.includes(t)){const c=this.userList.checkUserTasks(e),u=[];for(let[g,h]of c)u.push(`üìù ${g+1}. ${h.description}`);r=u.join(" "),r===""?a=_userConfig.responseTo[o(this,L)].noTaskFound:a=_userConfig.responseTo[o(this,L)].check}else if(_userConfig.commands.help.includes(t))a=_userConfig.responseTo[o(this,L)].help;else if(_userConfig.commands.additional.includes(t))a=_userConfig.responseTo[o(this,L)].additional;else throw new Error("command not found");return te(a,e,r)}catch(c){return te(_userConfig.responseTo[o(this,L)].invalidCommand,e,c.message,!0)}}clearListFromDOM(){const e=document.querySelector(".task-container.primary"),t=document.querySelector(".task-container.secondary");e.innerHTML="",t.innerHTML="",this.renderTaskCount()}addTaskToDOM(e,t){const s=document.querySelector(".task-container.primary"),i=document.querySelector(".task-container.secondary");if(document.querySelectorAll(`[data-user="${e.username}"]`).length===0){const c=wt(e),u=c.cloneNode(!0);s.appendChild(c),i.appendChild(u)}const a=document.createElement("li");a.classList.add("task"),a.dataset.taskId=`${t.id}`,a.innerText=t.description;const r=a.cloneNode(!0);s.querySelector(`[data-user="${e.username}"] .tasks`).appendChild(a),i.querySelector(`[data-user="${e.username}"] .tasks`).appendChild(r),this.renderTaskCount(),xe()}editTaskFromDOM(e){const t=document.querySelectorAll(`[data-task-id="${e.id}"]`);for(const s of t)s.innerText=e.description}completeTaskFromDOM(e){const t=document.querySelectorAll(`[data-task-id="${e}"]`);for(const s of t)s.classList.add("done"),s.classList.remove("focus");this.renderTaskCount()}focusTaskFromDOM(e,t){document.querySelectorAll(`[data-user="${e}"] .task`).forEach(s=>{s.classList.remove("focus")}),document.querySelectorAll(`[data-task-id="${t}"]`).forEach(s=>{s.classList.add("focus")})}deleteTaskFromDOM(e){const t=document.querySelectorAll(`[data-task-id="${e}"]`);for(const s of t)s.parentElement.children.length===1?s.parentElement.parentElement.remove():s.remove();this.renderTaskCount()}deleteUserFromDOM(e){const{username:t,tasks:s}=e,i=document.querySelectorAll(`[data-user="${t}"]`);for(let n of i)n.remove();this.renderTaskCount()}}oe=new WeakMap,L=new WeakMap,Me=new WeakMap,ie=new WeakMap,Ae=new WeakMap;function te(l,e,t,s=!1){return{message:_settings.botResponsePrefix+l.replace("{user}",e).replace("{message}",t),error:s}}function fs(l){return l.broadcaster||l.mod}function ve(l){return parseInt(l,10)-1}function wt({username:l,userColor:e}){const t=document.createElement("div");t.classList.add("card"),t.dataset.user=l;const s=document.createElement("div");s.classList.add("username"),s.innerText=l,s.style.color=_settings.showUsernameColor?e:"",t.appendChild(s);const i=document.createElement("ol");return i.classList.add("tasks"),t.appendChild(i),t}function gs(){document.getElementById("modal").classList.remove("hidden"),document.getElementById("modal").classList.add("flex")}function ys(){document.getElementById("modal").classList.remove("flex"),document.getElementById("modal").classList.add("hidden")}function ks(l){const e={command:null,parameters:null,source:null,tags:null};let t=0,s=null,i=null,n=null,a=null;if(l[t]==="@"){let c=l.indexOf(" ");s=l.slice(1,c),t=c+1}if(l[t]===":"){t+=1;let c=l.indexOf(" ",t);i=l.slice(t,c),t=c+1}let r=l.indexOf(":",t);return r===-1&&(r=l.length),n=l.slice(t,r).trim(),r!==l.length&&(t=r+1,a=l.slice(t)),e.command=vs(n),e.command===null?null:(s!==null&&(e.tags=bs(s)),e.source=Ss(i),e.parameters=a,a&&a[0]==="!"&&(e.command=Ts(a,e.command)),e)}function vs(l){let e=null;const t=l.split(" ");switch(t[0]){case"JOIN":case"PART":case"NOTICE":case"CLEARCHAT":case"HOSTTARGET":case"PRIVMSG":e={command:t[0],channel:t[1]};break;case"PING":e={command:t[0]};break;case"CAP":e={command:t[0],isCapRequestEnabled:t[2]==="ACK"};break;case"GLOBALUSERSTATE":e={command:t[0]};break;case"USERSTATE":case"ROOMSTATE":e={command:t[0],channel:t[1]};break;case"RECONNECT":e={command:t[0]};break;case"421":return console.error(`Unsupported IRC command: ${t[2]}`),null;case"001":e={command:t[0]};break;case"002":case"003":case"004":case"353":case"366":case"372":case"375":case"376":return null;default:return console.log(`Unexpected command: ${t[0]}`),null}return e}function bs(l){const e={"client-nonce":null,flags:null};let t={};return l.split(";").forEach(i=>{let n=i.split("="),a=n[1]===""?null:n[1];switch(n[0]){case"badges":case"badge-info":if(a){let c={};a.split(",").forEach(g=>{let h=g.split("/");c[h[0]]=h[1]}),t[n[0]]=c}else t[n[0]]=null;break;case"emotes":if(a){let c={};a.split("/").forEach(g=>{let h=g.split(":"),f=[];h[1].split(",").forEach(v=>{let T=v.split("-");f.push({startPosition:T[0],endPosition:T[1]})}),c[h[0]]=f}),t[n[0]]=c}else t[n[0]]=null;break;case"emote-sets":let r=a.split(",");t[n[0]]=r;break;default:e.hasOwnProperty(n[0])||(t[n[0]]=a)}}),t}function Ss(l){if(l==null)return null;{let e=l.split("!");return{nick:e.length==2?e[0]:null,host:e.length==2?e[1]:e[0]}}}function Ts(l,e){let s=l.slice(0+1).trim(),i=s.indexOf(" ");return i===-1?(e.botCommand=s.slice(0),e.botCommandParams=""):(e.botCommand=s.slice(0,i),e.botCommandParams=s.slice(i).trim()),e}class ws{constructor(){this.events=new Map}on(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}emit(e,...t){this.events.has(e)&&this.events.get(e).forEach(s=>s(...t))}off(e,t){if(this.events.has(e)){const s=this.events.get(e),i=s.indexOf(t);i!==-1&&(s.splice(i,1),s.length===0&&this.events.delete(e))}}once(e,t){const s=(...i)=>{t(...i),this.off(e,s)};this.on(e,s)}}class $s extends ws{constructor(t,{username:s,authToken:i,channel:n},a=WebSocket){super();p(this,A,null);p(this,re,1e3);this.url=t,this.username=s.toLowerCase(),this.channel=`#${n.toLowerCase()}`,this.authToken=i.includes("oauth:")?i:`oauth:${i}`,this.WebSocketService=a}connect(){m(this,A,new this.WebSocketService(this.url)),o(this,A).onopen=()=>{o(this,A).send("CAP REQ :twitch.tv/tags twitch.tv/commands"),o(this,A).send(`PASS ${this.authToken}`),o(this,A).send(`NICK ${this.username}`)},o(this,A).onerror=t=>(console.error("websocket error: ",t),t),o(this,A).onmessage=t=>{(t==null?void 0:t.data).trim().split(`\r
`).forEach(n=>{const a=ks(n);if(a)switch(a.command.command){case"PRIVMSG":if(a.parameters.startsWith("!")){const r=Cs(a);this.emit("command",r)}break;case"PING":o(this,A).send("PONG "+a.parameters);break;case"001":o(this,A).send(`JOIN ${this.channel}`);break;case"JOIN":console.log(`Joined ${this.channel}`),m(this,re,1e3),this.emit("oauthSuccess");break;case"RECONNECT":this.disconnect(1012,"The Twitch IRC server is terminating the connection for maintenance reasons.");break;case"PART":console.error("The channel must have banned (/ban) the bot."),o(this,A).close();break;case"NOTICE":console.error(`${a.parameters}; left ${this.channel}`),this.emit("oauthError"),o(this,A).send(`PART ${this.channel}`);break}})},o(this,A).onclose=t=>{switch(t.code){case 1e3:console.log("Connection closed normally.");break;case 1006:console.error(`Connection dropped. Reconnecting in ${o(this,re)} milliseconds...`);let s=o(this,re);setTimeout(()=>{this.connect()},s),m(this,re,o(this,re)*2);break;case 1012:console.log("Switching  servers..."),this.connect();break;default:console.error(`Unhandled code: ${t.code}. Reason: ${t.reason}`)}}}say(t,s){var i;if(((i=o(this,A))==null?void 0:i.readyState)===WebSocket.OPEN){const a=[s?`@reply-parent-msg-id=${s}`:"","PRIVMSG",this.channel,`:${t}`].join(" ").trim();o(this,A).send(a)}else console.error("Connection is not open")}disconnect(t=1e3,s=""){o(this,A).close(t,s)}}A=new WeakMap,re=new WeakMap;function Cs(l){var e,t;return{user:l.tags["display-name"],command:l.command.botCommand,message:l.command.botCommandParams||"",flags:{broadcaster:!!((e=l.tags.badges)!=null&&e.broadcaster),mod:!!((t=l.tags.badges)!=null&&t.moderator)},extra:{userColor:l.tags.color,messageId:l.tags.id}}}function Ls(l){l.emit("command",{user:"adminUser",command:"clearList",message:"",flags:{broadcaster:!0,mod:!1},extra:{userColor:"#FF0000",messageId:`${lt()}`}});const e=["red","coral","springGreen","lightSeaGreen","slateBlue","hotpink","violet","orange","darkTurquoise","dodgerblue","blueviolet"],{maxTasksPerUser:t}=_settings;for(let s=1;s<=5;s++){const i=`Username${s}`,n=e[s-1];for(let a=0;a<t;a++){const r={user:i,command:"task",message:`test task description ${a===2?"longer text example":""}`,flags:{broadcaster:!0,mod:!1},extra:{userColor:n,messageId:`${lt()}`}};setTimeout(()=>{l.emit("command",r)},1e3*s+a*100)}setTimeout(()=>{const a={user:i,command:"done",message:"1",flags:{broadcaster:!0,mod:!1},extra:{userColor:n,messageId:`${lt()}`}};l.emit("command",a)},1e3*s+1e4)}}function lt(){return`${Math.floor(Math.random()*1e9)}`}class Es{constructor(){p(this,ae);p(this,ne,{});p(this,Se,null);p(this,Te,null);d(this,ae,It).call(this)}applyTheme(e){if(!o(this,ne)[e])return console.error(`Theme "${e}" not found`),!1;const t=o(this,ne)[e];return m(this,Se,e),localStorage.setItem("currentTheme",e),d(this,ae,Mt).call(this,t),d(this,ae,At).call(this,t.fonts),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{themeName:e,theme:t}})),!0}getAvailableThemes(){return Object.entries(o(this,ne)).map(([e,t])=>({name:e,displayName:t.name}))}getCurrentTheme(){return o(this,Se)}getCurrentThemeData(){return o(this,ne)[o(this,Se)]}}ne=new WeakMap,Se=new WeakMap,Te=new WeakMap,ae=new WeakSet,It=async function(){try{const e=await fetch("./themes.json");m(this,Te,await e.json()),m(this,ne,o(this,Te).themes);const t=localStorage.getItem("currentTheme")||o(this,Te).defaultTheme;this.applyTheme(t)}catch(e){console.error("Failed to load themes:",e)}},Mt=function(e){const t=document.documentElement,{colors:s,effects:i}=e;t.style.setProperty("--color-primary",s.primary),t.style.setProperty("--color-secondary",s.secondary),t.style.setProperty("--color-accent",s.accent),t.style.setProperty("--color-text",s.text),t.style.setProperty("--color-text-secondary",s.textSecondary),t.style.setProperty("--color-card-bg",s.cardBg),t.style.setProperty("--color-card-border",s.cardBorder),t.style.setProperty("--color-timer-ring",s.timerRing),t.style.setProperty("--color-timer-bg",s.timerBg),t.style.setProperty("--color-task-done",s.taskDone),t.style.setProperty("--color-task-focus",s.taskFocus),t.style.setProperty("--shadow",s.shadow),s.background.includes("gradient"),t.style.setProperty("--background",s.background),t.style.setProperty("--background-overlay",s.backgroundOverlay),t.style.setProperty("--blur",i.blur),t.style.setProperty("--border-radius",i.borderRadius),t.style.setProperty("--card-radius",i.cardRadius)},At=function(e){typeof WebFont<"u"&&WebFont.load({google:{families:[`${e.primary}:300,400,600,700`,`${e.secondary}:300,400,500,700`]}});const t=document.documentElement;t.style.setProperty("--font-primary",`'${e.primary}', sans-serif`),t.style.setProperty("--font-secondary",`'${e.secondary}', sans-serif`)};class xs{constructor(e){p(this,k);p(this,D);p(this,we);p(this,De);p(this,me);p(this,Oe);p(this,U,null);p(this,F,0);p(this,O,0);p(this,V,"focus");p(this,Q,null);p(this,Y,!1);p(this,z,0);p(this,B,4);p(this,pe,25);p(this,fe,5);p(this,_e,15);p(this,Ne,4);p(this,$e,"pomoTimer.state");if(m(this,D,document.getElementById(e)),!o(this,D)){console.error(`Timer container "${e}" not found`);return}d(this,k,Dt).call(this)}startCycle(e=25,t=5,s=4,i=null){this.stop(),m(this,pe,e),m(this,fe,t),m(this,B,s),m(this,z,0),m(this,Q,i),d(this,k,pt).call(this),d(this,k,Be).call(this)}start(e,t="focus",s=null){this.stop(),m(this,V,t),m(this,F,e*60),m(this,O,o(this,F)),m(this,Q,s),m(this,Y,!1),d(this,k,ze).call(this),m(this,U,setInterval(()=>d(this,k,ee).call(this),1e3)),d(this,k,ee).call(this)}stop(){o(this,U)&&(clearInterval(o(this,U)),m(this,U,null))}pause(){o(this,U)&&(clearInterval(o(this,U)),m(this,U,null),m(this,Y,!0),d(this,k,Be).call(this))}resume(){!o(this,U)&&o(this,O)>0&&o(this,Y)&&(m(this,Y,!1),m(this,U,setInterval(()=>d(this,k,ee).call(this),1e3)),d(this,k,Be).call(this))}reset(){this.stop(),m(this,O,0),m(this,F,0),m(this,z,0),m(this,Y,!1),d(this,k,Ze).call(this),d(this,k,et).call(this,0),o(this,me).textContent="Ready",this.updatePomoCount(0,o(this,B)),d(this,k,Ft).call(this)}updatePomoCount(e,t){const s=o(this,D).querySelector(".pomo-number");s&&(s.textContent=`${e} / ${t}`)}getState(){return{mode:o(this,V),currentSeconds:o(this,O),totalSeconds:o(this,F),isRunning:o(this,U)!==null,isPaused:o(this,Y),currentSession:o(this,z),totalSessions:o(this,B),focusDuration:o(this,pe),breakDuration:o(this,fe)}}restoreState(){try{const e=localStorage.getItem(o(this,$e));if(e){const t=JSON.parse(e);(t.isRunning||t.isPaused)&&(m(this,V,t.mode),m(this,O,t.currentSeconds),m(this,F,t.totalSeconds),m(this,z,t.currentSession),m(this,B,t.totalSessions),m(this,pe,t.focusDuration),m(this,fe,t.breakDuration),m(this,Y,t.isPaused),d(this,k,Ze).call(this),d(this,k,ze).call(this),this.updatePomoCount(o(this,z),o(this,B)),t.isRunning&&m(this,U,setInterval(()=>d(this,k,ee).call(this),1e3)))}}catch(e){console.warn("Failed to restore timer state:",e)}}}D=new WeakMap,we=new WeakMap,De=new WeakMap,me=new WeakMap,Oe=new WeakMap,U=new WeakMap,F=new WeakMap,O=new WeakMap,V=new WeakMap,Q=new WeakMap,Y=new WeakMap,z=new WeakMap,B=new WeakMap,pe=new WeakMap,fe=new WeakMap,_e=new WeakMap,Ne=new WeakMap,$e=new WeakMap,k=new WeakSet,Dt=function(){o(this,D).innerHTML=`
			<div class="circular-timer">
				<svg class="timer-svg" viewBox="0 0 200 200">
					<!-- Background circle -->
					<circle
						class="timer-bg-circle"
						cx="100"
						cy="100"
						r="85"
						fill="none"
						stroke="var(--color-timer-bg)"
						stroke-width="12"
					/>
					<!-- Progress circle -->
					<circle
						class="timer-progress-ring"
						cx="100"
						cy="100"
						r="85"
						fill="none"
						stroke="var(--color-timer-ring)"
						stroke-width="12"
						stroke-linecap="round"
						transform="rotate(-90 100 100)"
					/>
				</svg>
				<div class="timer-content">
					<div class="timer-icon">
						<i class="icon-work">üìö</i>
					</div>
					<div class="timer-time">00:00</div>
					<div class="timer-label">Ready</div>
					<div class="timer-pomo-count">
						<span class="pomo-text">Pomo</span>
						<span class="pomo-number">0 / 4</span>
					</div>
				</div>
			</div>
		`,m(this,we,o(this,D).querySelector(".timer-progress-ring")),m(this,De,o(this,D).querySelector(".timer-time")),m(this,me,o(this,D).querySelector(".timer-label")),m(this,Oe,o(this,D).querySelector(".timer-icon")),d(this,k,et).call(this,0)},pt=function(){if(o(this,z)>=o(this,B)){d(this,k,Ut).call(this);return}m(this,V,"focus"),mt(this,z)._++,m(this,F,o(this,pe)*60),m(this,O,o(this,F)),m(this,Y,!1),d(this,k,ze).call(this),this.updatePomoCount(o(this,z),o(this,B)),m(this,U,setInterval(()=>d(this,k,ee).call(this),1e3)),d(this,k,ee).call(this)},Ot=function(){const e=o(this,z)%o(this,Ne)===0,t=e?o(this,_e):o(this,fe);m(this,V,e?"longbreak":"break"),m(this,F,t*60),m(this,O,o(this,F)),m(this,Y,!1),d(this,k,ze).call(this),m(this,U,setInterval(()=>d(this,k,ee).call(this),1e3)),d(this,k,ee).call(this)},ee=function(){if(o(this,O)<=0){this.stop(),d(this,k,qt).call(this);return}mt(this,O)._--,d(this,k,Ze).call(this),d(this,k,et).call(this,(o(this,F)-o(this,O))/o(this,F)*100),o(this,O)<=3&&o(this,O)>0&&o(this,D).classList.add("timer-pulse")},Ze=function(){const e=Math.floor(o(this,O)/60).toString().padStart(2,"0"),t=(o(this,O)%60).toString().padStart(2,"0");o(this,De).textContent=`${e}:${t}`},et=function(e){const t=2*Math.PI*85,s=t-e/100*t;o(this,we).style.strokeDasharray=`${t} ${t}`,o(this,we).style.strokeDashoffset=s},ze=function(){const e={focus:{label:"Focus",icon:"üìö",class:"timer-focus-mode"},break:{label:"Short Break",icon:"‚òï",class:"timer-break-mode"},longbreak:{label:"Long Break",icon:"üå¥",class:"timer-longbreak-mode"}},t=e[o(this,V)]||e.focus;o(this,me).textContent=t.label,o(this,Oe).innerHTML=`<i class="icon-${o(this,V)}">${t.icon}</i>`,o(this,D).classList.remove("timer-focus-mode","timer-break-mode","timer-longbreak-mode"),o(this,D).classList.add(t.class)},qt=function(){o(this,D).classList.remove("timer-pulse"),o(this,D).classList.add("timer-complete"),setTimeout(()=>{o(this,D).classList.remove("timer-complete")},2e3),o(this,V)==="focus"?setTimeout(()=>d(this,k,Ot).call(this),2e3):setTimeout(()=>d(this,k,pt).call(this),2e3),o(this,Q)&&o(this,Q).call(this,o(this,V),o(this,z),o(this,B)),d(this,k,Be).call(this)},Ut=function(){this.reset(),o(this,me).textContent="Cycle Complete! üéâ",o(this,Q)&&o(this,Q).call(this,"cycle_complete",o(this,B),o(this,B))},Be=function(){try{localStorage.setItem(o(this,$e),JSON.stringify(this.getState()))}catch(e){console.warn("Failed to save timer state:",e)}},Ft=function(){try{localStorage.removeItem(o(this,$e))}catch(e){console.warn("Failed to clear timer state:",e)}};class Ps{constructor(e){p(this,S);p(this,C,[]);p(this,je);p(this,P);p(this,qe,"taskBacklog");p(this,Ve,50);p(this,dt,null);p(this,Ce,!1);p(this,Ye,15);if(m(this,je,e),m(this,P,document.getElementById(e)),!o(this,P)){console.error(`Backlog container "${e}" not found`);return}d(this,S,Nt).call(this),d(this,S,Ht).call(this),this.render()}addItem(e,t="Unknown",s=3){if(o(this,C).length>=o(this,Ve))return console.warn("Backlog is full"),null;const i={id:Date.now().toString(),description:e,creator:t,priority:Math.max(1,Math.min(5,s)),completed:!1,createdAt:new Date().toISOString()};return o(this,C).push(i),d(this,S,tt).call(this),d(this,S,Ee).call(this),this.render(),i}removeItem(e){const t=o(this,C).findIndex(s=>s.id===e);return t===-1?!1:(o(this,C).splice(t,1),d(this,S,Ee).call(this),this.render(),!0)}toggleComplete(e){const t=o(this,C).find(s=>s.id===e);return t?(t.completed=!t.completed,d(this,S,Ee).call(this),this.render(),!0):!1}setPriority(e,t){const s=o(this,C).find(i=>i.id===e);return s?(s.priority=Math.max(1,Math.min(5,t)),d(this,S,tt).call(this),d(this,S,Ee).call(this),this.render(),!0):!1}clearCompleted(){const e=o(this,C).length;m(this,C,o(this,C).filter(s=>!s.completed));const t=e-o(this,C).length;return t>0&&(d(this,S,Ee).call(this),this.render()),t}getItems(){return[...o(this,C)]}getItemByIndex(e){return o(this,C)[e-1]||null}render(){const e=o(this,P).querySelector(".backlog-list-primary"),t=o(this,P).querySelector(".backlog-list-secondary"),s=o(this,P).querySelector(".backlog-empty"),i=o(this,P).querySelector(".backlog-count"),n=o(this,P).querySelector(".backlog-panel"),a=o(this,C).filter(c=>!c.completed).length;if(i.textContent=`${a} task${a!==1?"s":""}`,n.classList.remove("minimized","single-item","expanded"),o(this,C).length===0){n.classList.add("minimized"),e.classList.add("hidden"),t.classList.add("hidden"),s.classList.remove("hidden"),d(this,S,gt).call(this);return}else o(this,C).length===1?n.classList.add("single-item"):o(this,C).length>=5&&n.classList.add("expanded");e.classList.remove("hidden"),s.classList.add("hidden");const r=o(this,C).map((c,u)=>d(this,S,_t).call(this,c,u+1)).join("");e.innerHTML=r,t.innerHTML=r,d(this,S,ft).call(this,e),d(this,S,ft).call(this,t),setTimeout(()=>d(this,S,Bt).call(this),100)}}C=new WeakMap,je=new WeakMap,P=new WeakMap,qe=new WeakMap,Ve=new WeakMap,dt=new WeakMap,Ce=new WeakMap,Ye=new WeakMap,S=new WeakSet,Ht=function(){o(this,P).innerHTML=`
			<div class="backlog-panel">
				<div class="backlog-header">
					<div class="backlog-header-top">
						<h3 class="backlog-title">
							<span class="backlog-icon">üìã</span>
							Task Backlog
						</h3>
						<div class="backlog-controls">
							<span class="backlog-count">0 tasks</span>
							<button class="backlog-btn backlog-clear-btn" title="Clear completed">
								<span>üóëÔ∏è</span>
							</button>
						</div>
					</div>
					<div class="backlog-commands-hint">
						<span class="backlog-cmd-label">COMMANDS:</span>
						<span class="backlog-cmd-typewriter"></span>
					</div>
				</div>
				<div class="backlog-content-wrapper">
					<div class="backlog-content">
						<div class="backlog-list backlog-list-primary"></div>
						<div class="backlog-list backlog-list-secondary"></div>
						<div class="backlog-empty">
							<p>No tasks in backlog</p>
							<p class="backlog-hint">Use !backlog add [task] to add tasks</p>
						</div>
					</div>
				</div>
			</div>
		`,o(this,P).querySelector(".backlog-clear-btn").addEventListener("click",()=>this.clearCompleted()),d(this,S,zt).call(this)},zt=function(){const e=["!backlog add [task]","!backlog done #","!backlog remove #","!backlog clear (mods)"],t=o(this,P).querySelector(".backlog-cmd-typewriter");if(!t)return;let s=0,i=0,n=!1,a=!1;const r=()=>{const c=e[s];if(a){setTimeout(()=>{a=!1,n=!0,r()},2e3);return}n?(t.textContent=c.substring(0,i-1),i--,i===0?(n=!1,s=(s+1)%e.length,setTimeout(r,500)):setTimeout(r,40)):(t.textContent=c.substring(0,i+1),i++,i===c.length&&(a=!0),setTimeout(r,a?0:80))};r()},tt=function(){o(this,C).sort((e,t)=>e.completed!==t.completed?e.completed?1:-1:e.priority!==t.priority?t.priority-e.priority:new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())},ft=function(e){e.querySelectorAll(".backlog-item-check").forEach(t=>{t.addEventListener("click",s=>{const n=s.target.closest(".backlog-item");n&&n.dataset&&this.toggleComplete(n.dataset.id)})}),e.querySelectorAll(".backlog-item-delete").forEach(t=>{t.addEventListener("click",s=>{const n=s.target.closest(".backlog-item");n&&n.dataset&&this.removeItem(n.dataset.id)})})},Bt=function(){const e=o(this,P).querySelector(".backlog-list-primary"),t=o(this,P).querySelector(".backlog-list-secondary");if(e)if(o(this,C).length>5&&!o(this,Ce)){const s=e.scrollHeight;t.style.display="flex",d(this,S,Rt).call(this,s)}else t.style.display="none",d(this,S,gt).call(this)},Rt=function(e){const t=o(this,P).querySelector(".backlog-list-primary"),s=o(this,P).querySelector(".backlog-list-secondary");if(!t||!s)return;const n=e+12,a=n/o(this,Ye)*1e3,r=[{transform:"translateY(0)"},{transform:`translateY(-${n}px)`}],c={duration:a,iterations:1/0,easing:"linear"};t.animate(r,c),s.animate(r,c),m(this,Ce,!0);const u=o(this,P).querySelector(".backlog-content");u&&u.classList.add("scrolling")},gt=function(){const e=o(this,P).querySelector(".backlog-list-primary"),t=o(this,P).querySelector(".backlog-list-secondary");e&&e.getAnimations().forEach(i=>i.cancel()),t&&t.getAnimations().forEach(i=>i.cancel()),m(this,Ce,!1);const s=o(this,P).querySelector(".backlog-content");s&&s.classList.remove("scrolling")},_t=function(e,t){const s=e.completed?"‚úÖ":"‚¨ú",i=e.creator||"Unknown";return`
			<div class="backlog-item ${e.completed?"completed":""}" data-id="${e.id}">
				<div class="backlog-item-header">
					<span class="backlog-item-index">${t}.</span>
					<span class="backlog-item-creator" title="Created by ${i}">@${d(this,S,yt).call(this,i)}</span>
				</div>
				<div class="backlog-item-body">
					<button class="backlog-item-check" title="${e.completed?"Mark incomplete":"Mark complete"}">
						${s}
					</button>
					<span class="backlog-item-text">${d(this,S,yt).call(this,e.description)}</span>
				</div>
				<button class="backlog-item-delete" title="Delete">üóëÔ∏è</button>
			</div>
		`},yt=function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML},Ee=function(){try{localStorage.setItem(o(this,qe),JSON.stringify(o(this,C)))}catch(e){console.error("Failed to save backlog:",e)}},Nt=function(){try{const e=localStorage.getItem(o(this,qe));e&&(m(this,C,JSON.parse(e)),d(this,S,tt).call(this))}catch(e){console.error("Failed to load backlog:",e),m(this,C,[])}};class Is{constructor(e){p(this,$);p(this,E,new Map);p(this,We);p(this,I);p(this,Ue,"viewerProfiles");p(this,Je,100);p(this,ut,null);p(this,Le,!1);p(this,Ke,15);if(m(this,We,e),m(this,I,document.getElementById(e)),!o(this,I)){console.error(`Info panel container "${e}" not found`);return}d(this,$,Jt).call(this),d(this,$,jt).call(this),this.render()}setViewerInfo(e,t,s){o(this,E).has(e)||(o(this,E).size>=o(this,Je)&&d(this,$,Vt).call(this),o(this,E).set(e,{username:e,info:{},lastActive:Date.now(),taskCount:0}));const i=o(this,E).get(e);return i.info[t]=s,i.lastActive=Date.now(),d(this,$,ot).call(this),this.render(),!0}getViewerInfo(e){return o(this,E).get(e)||null}updateViewerActivity(e,t=0){if(!o(this,E).has(e))o(this,E).set(e,{username:e,info:{},lastActive:Date.now(),taskCount:t});else{const s=o(this,E).get(e);s.lastActive=Date.now(),s.taskCount=t}d(this,$,ot).call(this),this.render()}getAllViewers(){return Array.from(o(this,E).values())}removeViewer(e){const t=o(this,E).delete(e);return t&&(d(this,$,ot).call(this),this.render()),t}getActiveViewers(){const e=Date.now()-36e5;return this.getAllViewers().filter(t=>t.lastActive>e)}render(){const e=o(this,I).querySelector(".info-list-primary"),t=o(this,I).querySelector(".info-list-secondary"),s=o(this,I).querySelector(".info-empty"),i=o(this,I).querySelector(".active-count"),n=o(this,I).querySelector(".total-count"),a=o(this,I).querySelector(".info-panel"),r=this.getActiveViewers();if(i.textContent=String(r.length),n.textContent=String(o(this,E).size),a.classList.remove("minimized","single-item","expanded"),o(this,E).size===0){a.classList.add("minimized"),e.classList.add("hidden"),t.classList.add("hidden"),s.classList.remove("hidden"),d(this,$,kt).call(this);return}else o(this,E).size===1?a.classList.add("single-item"):o(this,E).size>=5&&a.classList.add("expanded");e.classList.remove("hidden"),s.classList.add("hidden");const u=this.getAllViewers().sort((g,h)=>h.lastActive-g.lastActive).slice(0,10).map(g=>d(this,$,Yt).call(this,g)).join("");e.innerHTML=u,t.innerHTML=u,setTimeout(()=>d(this,$,Kt).call(this),100)}}E=new WeakMap,We=new WeakMap,I=new WeakMap,Ue=new WeakMap,Je=new WeakMap,ut=new WeakMap,Le=new WeakMap,Ke=new WeakMap,$=new WeakSet,jt=function(){o(this,I).innerHTML=`
			<div class="info-panel">
				<div class="info-header">
					<h3 class="info-title">
						<span class="info-icon">üë•</span>
						Viewer Info
					</h3>
					<div class="info-stats">
						<span class="stat-item">
							<span class="stat-label">Active:</span>
							<span class="stat-value active-count">0</span>
						</span>
						<span class="stat-item">
							<span class="stat-label">Total:</span>
							<span class="stat-value total-count">0</span>
						</span>
					</div>
				</div>
				<div class="info-content-wrapper">
					<div class="info-content">
						<div class="info-list info-list-primary"></div>
						<div class="info-list info-list-secondary"></div>
						<div class="info-empty">
							<p>No viewer data yet</p>
							<p class="info-hint">Viewers can set info with !setinfo [field] [value]</p>
						</div>
					</div>
				</div>
			</div>
		`},Vt=function(){const e=this.getAllViewers();e.length!==0&&(e.sort((t,s)=>t.lastActive-s.lastActive),o(this,E).delete(e[0].username))},Yt=function(e){const{username:t,info:s,lastActive:i,taskCount:n}=e,a=Date.now()-i<3600*1e3,r=d(this,$,Wt).call(this,i),c=Object.entries(s).map(([u,g])=>`
				<div class="viewer-info-item">
					<span class="info-key">${d(this,$,st).call(this,u)}:</span>
					<span class="info-value">${d(this,$,st).call(this,g)}</span>
				</div>
			`).join("");return`
			<div class="viewer-card ${a?"active":"inactive"}">
				<div class="viewer-header">
					<span class="viewer-name">${d(this,$,st).call(this,t)}</span>
					<span class="viewer-status ${a?"status-active":"status-inactive"}">
						${a?"üü¢":"‚ö´"}
					</span>
				</div>
				<div class="viewer-meta">
					<span class="viewer-tasks">üìù ${n} task${n!==1?"s":""}</span>
					<span class="viewer-time">‚è∞ ${r}</span>
				</div>
				${c?`<div class="viewer-info">${c}</div>`:""}
			</div>
		`},Wt=function(e){const t=Math.floor((Date.now()-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`},st=function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML},ot=function(){try{const e=Array.from(o(this,E).entries());localStorage.setItem(o(this,Ue),JSON.stringify(e))}catch(e){console.error("Failed to save viewer data:",e)}},Jt=function(){try{const e=localStorage.getItem(o(this,Ue));if(e){const t=JSON.parse(e);m(this,E,new Map(t))}}catch(e){console.error("Failed to load viewer data:",e),m(this,E,new Map)}},Kt=function(){const e=o(this,I).querySelector(".info-list-primary"),t=o(this,I).querySelector(".info-list-secondary");if(e)if(o(this,E).size>5&&!o(this,Le)){const s=e.scrollHeight;t.style.display="flex",d(this,$,Gt).call(this,s)}else t.style.display="none",d(this,$,kt).call(this)},Gt=function(e){const t=o(this,I).querySelector(".info-list-primary"),s=o(this,I).querySelector(".info-list-secondary");if(!t||!s)return;const n=e+12,a=n/o(this,Ke)*1e3,r=[{transform:"translateY(0)"},{transform:`translateY(-${n}px)`}],c={duration:a,iterations:1/0,easing:"linear"};t.animate(r,c),s.animate(r,c),m(this,Le,!0);const u=o(this,I).querySelector(".info-content");u&&u.classList.add("scrolling")},kt=function(){const e=o(this,I).querySelector(".info-list-primary"),t=o(this,I).querySelector(".info-list-secondary");e&&e.getAnimations().forEach(i=>i.cancel()),t&&t.getAnimations().forEach(i=>i.cancel()),m(this,Le,!1);const s=o(this,I).querySelector(".info-content");s&&s.classList.remove("scrolling")};const $t={timer:{id:"timer-container",defaultDisplay:"flex"},taskList:{id:"task-list-container",defaultDisplay:"block"},backlog:{id:"backlog-container",defaultDisplay:"block"},infoPanel:{id:"info-panel-container",defaultDisplay:"block"}},Ms=30;class As{constructor(e){p(this,b);p(this,ge,{compact:{name:"Compact",description:"Timer and tasks in a tight side-by-side layout",container:{padding:40},components:{timer:{enabled:!0,display:"flex",position:{top:120,left:80},size:{width:320,height:320,minWidth:280}},taskList:{enabled:!0,position:{top:100,left:460},size:{width:700,minWidth:520,minHeight:420}},backlog:{enabled:!1},infoPanel:{enabled:!1}}},split:{name:"Split View",description:"Timer left, tasks center, backlog right",container:{padding:40},components:{timer:{enabled:!0,display:"flex",position:{top:120,left:80},size:{width:320,height:320}},taskList:{enabled:!0,position:{top:100,left:440},size:{width:320,minHeight:480}},backlog:{enabled:!0,position:{top:100,left:800},size:{width:320,minHeight:420}},infoPanel:{enabled:!1}}},fullOverlay:{name:"Full Overlay",description:"Balanced dashboard with all panels visible",container:{padding:32},components:{timer:{enabled:!0,display:"flex",position:{top:60,left:780},size:{width:360,height:360}},taskList:{enabled:!0,position:{top:460,left:540},size:{width:280,minHeight:420}},backlog:{enabled:!0,position:{top:460,left:220},size:{width:280,minHeight:420}},infoPanel:{enabled:!0,position:{top:460,left:860},size:{width:280,minHeight:420}}}},minimal:{name:"Minimal",description:"Single timer focus for clean scenes",container:{padding:60},components:{timer:{enabled:!0,display:"flex",position:{top:320,left:820},size:{width:320,height:320}},taskList:{enabled:!1},backlog:{enabled:!1},infoPanel:{enabled:!1}}},timerWithTasks:{name:"Timer + Tasks",description:"Timer stacked above active tasks",container:{padding:40},components:{timer:{enabled:!0,display:"flex",position:{top:100,left:760},size:{width:360,height:360}},taskList:{enabled:!0,position:{top:520,left:700},size:{width:520,minHeight:420}},backlog:{enabled:!1},infoPanel:{enabled:!1}}},dashboard:{name:"Productivity Dashboard",description:"Comprehensive layout for work and study streams",container:{padding:36},components:{timer:{enabled:!0,display:"flex",position:{top:80,left:80},size:{width:320,height:320}},taskList:{enabled:!0,position:{top:80,left:460},size:{width:360,minHeight:480}},backlog:{enabled:!0,position:{top:620,left:80},size:{width:360,minHeight:360}},infoPanel:{enabled:!0,position:{top:620,left:480},size:{width:360,minHeight:360}}}}});p(this,le,"compact");p(this,G);p(this,R,{});p(this,W,{});p(this,Fe,"enhancedOverlay.panelPositions.v2");p(this,He,"enhancedOverlay.panelSizes.v1");if(m(this,G,document.getElementById(e)),!o(this,G)){console.error(`Layout container "${e}" not found`);return}m(this,R,d(this,b,rs).call(this)),m(this,W,d(this,b,ns).call(this));const t=localStorage.getItem("currentLayout")||"compact";this.applyLayout(t)}applyLayout(e){if(!o(this,ge)[e])return console.error(`Layout "${e}" not found`),!1;m(this,le,e);const t=o(this,ge)[e];return localStorage.setItem("currentLayout",e),o(this,G).dataset.layout=e,d(this,b,Xt).call(this),d(this,b,Qt).call(this,t.container),d(this,b,Zt).call(this,e,t.components),window.dispatchEvent(new CustomEvent("layoutChanged",{detail:{layoutName:e,layout:t}})),!0}savePanelPosition(e,t,s){o(this,R)[e]||(o(this,R)[e]={});const i=d(this,b,it).call(this,s);o(this,R)[e][t]={left:Math.round(i.left),top:Math.round(i.top)},d(this,b,rt).call(this)}savePanelSize(e,t,s){o(this,W)[e]||(o(this,W)[e]={}),o(this,W)[e][t]={width:Math.round(s.width),height:Math.round(s.height)},d(this,b,nt).call(this)}resetPanelPosition(e,t=o(this,le)){var s;return o(this,R)[t]?e?o(this,R)[t][e]?(delete o(this,R)[t][e],(s=o(this,W)[t])!=null&&s[e]&&(delete o(this,W)[t][e],d(this,b,nt).call(this)),d(this,b,rt).call(this),this.applyLayout(t),!0):!1:(delete o(this,R)[t],delete o(this,W)[t],d(this,b,rt).call(this),d(this,b,nt).call(this),this.applyLayout(t),!0):!1}resetLayoutPositions(e){return this.resetPanelPosition(void 0,e)}getAvailableLayouts(){return Object.entries(o(this,ge)).map(([e,t])=>({name:e,displayName:t.name,description:t.description}))}getCurrentLayout(){return o(this,le)}getDefaultPosition(e,t){var i,n;const s=o(this,ge)[e];return((n=(i=s==null?void 0:s.components)==null?void 0:i[t])==null?void 0:n.position)??null}createLayoutSelector(){const e=document.createElement("div");return e.className="layout-selector glass-effect",e.innerHTML=`
			<div class="layout-selector-header">
				<h4>Layout Presets</h4>
				<button class="layout-close-btn">√ó</button>
			</div>
			<div class="layout-options">
				${this.getAvailableLayouts().map(t=>`
					<button 
						class="layout-option ${t.name===o(this,le)?"active":""}"
						data-layout="${t.name}"
					>
						<div class="layout-option-name">${t.displayName}</div>
						<div class="layout-option-desc">${t.description}</div>
					</button>
				`).join("")}
			</div>
		`,e.querySelectorAll(".layout-option").forEach(t=>{t.addEventListener("click",()=>{const s=t,i=s.dataset.layout;this.applyLayout(i),e.querySelectorAll(".layout-option").forEach(n=>n.classList.remove("active")),s.classList.add("active")})}),e.querySelector(".layout-close-btn").addEventListener("click",()=>{e.remove()}),e}convertToBasePosition(e){return d(this,b,it).call(this,e)}refreshLayout(){this.applyLayout(o(this,le))}}ge=new WeakMap,le=new WeakMap,G=new WeakMap,R=new WeakMap,W=new WeakMap,Fe=new WeakMap,He=new WeakMap,b=new WeakSet,Xt=function(){const e=o(this,G).style;e.display="block",e.gridTemplateColumns="",e.gridTemplateRows="",e.justifyContent="",e.alignItems="",e.maxWidth="",e.height="",e.gap="",e.position="fixed",e.top="0",e.left="0",e.width="100%",e.height="100%",e.padding=`${Ms}px`,e.boxSizing="border-box",e.overflow="visible"},Qt=function(e={}){if(!e)return;const t=o(this,G).style;typeof e.padding=="number"&&(t.padding=`${e.padding}px`)},Zt=function(e,t){const{scaleX:s,scaleY:i}=d(this,b,vt).call(this),n=o(this,G).getBoundingClientRect();Object.values($t).forEach(({id:a})=>{const r=document.getElementById(a);r&&(r.style.display="none",r.removeAttribute("aria-hidden"))}),Object.entries(t).forEach(([a,r])=>{const c=$t[a];if(!c)return;const u=document.getElementById(c.id);if(!u)return;if(!(r!=null&&r.enabled)){u.style.display="none",u.setAttribute("aria-hidden","true");return}u.style.display=r.display||c.defaultDisplay,u.classList.add("draggable-panel"),u.style.position="absolute",u.style.zIndex=r.zIndex??10,u.dataset.panel=a,u.style.transform="none",console.log(`Setting up panel ${a}:`,{display:u.style.display,position:u.style.position,left:u.style.left,top:u.style.top,class:u.className}),d(this,b,es).call(this,u,r.size,a,e);const h=d(this,b,ts).call(this,e,a)??r.position;if(h){const f=d(this,b,os).call(this,h,s,i),y=d(this,b,is).call(this,f,u,n);u.style.left=`${Math.round(y.left)}px`,u.style.top=`${Math.round(y.top)}px`;const v=d(this,b,it).call(this,y);u.dataset.baseLeft=`${v.left}`,u.dataset.baseTop=`${v.top}`}})},es=function(e,t={},s=null,i=null){const n=i&&s?d(this,b,ss).call(this,i,s):null,a=n?{...t,...n}:t;["width","height","minWidth","minHeight","maxWidth","maxHeight"].forEach(c=>{a[c]!==void 0?e.style[c]=`${a[c]}px`:e.style[c]=""})},ts=function(e,t){var s;return((s=o(this,R)[e])==null?void 0:s[t])??null},ss=function(e,t){var s;return((s=o(this,W)[e])==null?void 0:s[t])??null},vt=function(){if(!o(this,G))return{scaleX:1,scaleY:1};const e=1,t=1;return console.log("Using 1:1 scale for 1920x1080 resolution"),{scaleX:e,scaleY:t}},os=function(e,t,s){return{left:e.left*t,top:e.top*s}},is=function(e,t,s){const i=t.getBoundingClientRect(),n=i.width||t.offsetWidth||0,a=i.height||t.offsetHeight||0,r=Math.max(0,s.width-n),c=Math.max(0,s.height-a);return{left:Math.max(0,Math.min(r,e.left)),top:Math.max(0,Math.min(c,e.top))}},it=function(e){const{scaleX:t,scaleY:s}=d(this,b,vt).call(this);return{left:e.left/t,top:e.top/s}},rs=function(){try{const e=localStorage.getItem(o(this,Fe));return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load saved panel positions",e),{}}},rt=function(){try{localStorage.setItem(o(this,Fe),JSON.stringify(o(this,R)))}catch(e){console.warn("Failed to persist panel positions",e)}},ns=function(){try{const e=localStorage.getItem(o(this,He));return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load saved panel sizes",e),{}}},nt=function(){try{localStorage.setItem(o(this,He),JSON.stringify(o(this,W)))}catch(e){console.warn("Failed to persist panel sizes",e)}};const{twitch_channel:Ds,twitch_oauth:Os,twitch_username:qs}=_authConfig,Us="wss://irc-ws.chat.twitch.tv:443",K=new $s(Us,{username:qs,authToken:Os,channel:Ds});let Pe,de,se,ue,Ie,q;const be=new Map,Fs={timer:".circular-timer",taskList:".header",backlog:".backlog-header",infoPanel:".info-header"};window.addEventListener("load",()=>{let l="userList";_settings.testMode&&(console.log("Test mode enabled"),l="testUserList"),Pe=new ps(l),Pe.render(),de=new Es,se=new xs("timer-container"),ue=new Ps("backlog-container"),Ie=new Is("info-panel-container"),q=new As("app"),Ct(),zs(),Rs(),K.on("command",e=>{var u;const{user:t,command:s,message:i,flags:n,extra:a}=e,r=Hs(t,s,i,n);if(r){r.error?console.error(r.message):K.say(r.message,a.messageId);return}const c=Pe.chatHandler(t,s,i,n,a);if(c.error)console.error(c.message);else{K.say(c.message,a.messageId);const g=((u=Pe.userList.getUser(t))==null?void 0:u.getTasks().length)||0;Ie.updateViewerActivity(t,g)}}),K.on("oauthError",()=>{gs()}),K.on("oauthSuccess",()=>{ys()}),K.connect(),_settings.testMode&&Ls(K)});function Hs(l,e,t,s,i){var g;const n=`!${e.toLowerCase()}`,a=s.broadcaster||s.mod,r=_settings.botResponsePrefix,c=(t||"").trim(),u=h=>{if(!h)return null;const f=h.toLowerCase(),y=f.replace(/[^a-z0-9]/g,""),v=q.getAvailableLayouts();for(const T of v){const _=T.name.toLowerCase(),N=_.replace(/[^a-z0-9]/g,""),X=T.displayName.toLowerCase(),ye=X.replace(/[^a-z0-9]/g,"");if(_===f||N===y||X===f||ye===y)return T.name}return null};if(n==="!theme"){if(!a)return{message:`${r}@${l} Only moderators can change themes.`,error:!0};if(!c){const y=de.getAvailableThemes().map(v=>v.name).join(", ");return{message:`${r}Available themes: ${y}. Use !theme [name] to switch.`,error:!1}}const h=c.toLowerCase(),f=de.applyTheme(h);return{message:f?`${r}Theme changed to ${c}! üé®`:`${r}Theme "${c}" not found.`,error:!f}}if(n==="!layout"){if(!a)return{message:`${r}@${l} Only moderators can change layouts.`,error:!0};if(!c){const v=q.getAvailableLayouts().map(T=>`${T.name} (${T.description})`).join(", ");return{message:`${r}Available layouts: ${v}. Use !layout [name] to switch.`,error:!1}}const h=u(c);if(!h)return{message:`${r}Layout "${c}" not found.`,error:!0};const f=q.applyLayout(h),y=q.getAvailableLayouts().find(v=>v.name===h);return{message:f?`${r}Layout changed to ${(y==null?void 0:y.displayName)||h}! üìê`:`${r}Layout "${c}" not found.`,error:!f}}if(n==="!resetpanel"){if(!a)return{message:`${r}@${l} Only moderators can reset panel positions.`,error:!0};if(!c)return{message:`${r}Usage: !resetpanel [timer|tasklist|backlog|infopanel] (optional layout)`,error:!1};const[h,f]=c.split(/\s+/),y=h==null?void 0:h.toLowerCase();if(!y||!["timer","tasklist","backlog","infopanel"].includes(y))return{message:`${r}Panel must be one of: timer, tasklist, backlog, infopanel.`,error:!0};const T=y==="tasklist"?"taskList":y==="infopanel"?"infoPanel":y,_=f?u(f):q.getCurrentLayout();if(!_)return{message:`${r}Layout "${f}" not found.`,error:!0};const N=q.getAvailableLayouts().find(Ge=>Ge.name===_),X=(N==null?void 0:N.displayName)||_,ye=q.resetPanelPosition(T,_);return{message:ye?`${r}Reset ${y} panel position for ${X}.`:`${r}No custom position stored for ${y} in ${X}.`,error:!ye}}if(n==="!resetlayout"){if(!a)return{message:`${r}@${l} Only moderators can reset layouts.`,error:!0};const h=c?u(c):q.getCurrentLayout();if(!h)return{message:`${r}Layout "${c}" not found.`,error:!0};const f=q.getAvailableLayouts().find(T=>T.name===h),y=(f==null?void 0:f.displayName)||h,v=q.resetLayoutPositions(h);return{message:v?`${r}Reset all panel positions for ${y}.`:`${r}No custom positions stored for ${y}.`,error:!v}}if(n==="!backlog"){const h=c.length?c.split(/\s+/):[],f=(g=h[0])==null?void 0:g.toLowerCase(),y=h.slice(1).join(" ");if(!f)return{message:`${r}@${l} Usage: !backlog add/done/remove [text/number]`,error:!1};if(f==="add"){if(!y)return{message:`${r}@${l} Provide a task description to add.`,error:!0};const v=ue.addItem(y);return{message:v?`${r}@${l} Added "${y}" to backlog! üìã`:`${r}@${l} Backlog is full!`,error:!v}}if(f==="done"||f==="remove"){const v=parseInt(y,10);if(!y||Number.isNaN(v)||v<1)return{message:`${r}@${l} Provide a valid backlog item number.`,error:!0};const T=ue.getItemByIndex(v);return T?f==="done"?(ue.toggleComplete(T.id),{message:`${r}@${l} Marked backlog item ${v} as done! ‚úÖ`,error:!1}):(ue.removeItem(T.id),{message:`${r}@${l} Removed backlog item ${v}! üóëÔ∏è`,error:!1}):{message:`${r}@${l} Backlog item ${v} not found.`,error:!0}}if(f==="clear"){if(!a)return{message:`${r}@${l} Only moderators can clear the backlog.`,error:!0};const v=ue.clearCompleted();return{message:`${r}Cleared ${v} completed backlog item${v!==1?"s":""}!`,error:!1}}return{message:`${r}@${l} Usage: !backlog add/done/remove [text/number]`,error:!1}}if(n==="!setinfo"){const h=c.split(/\s+/);if(h.length<2)return{message:`${r}@${l} Usage: !setinfo [field] [value] (e.g., !setinfo goal Graduate)`,error:!1};const f=h[0],y=c.slice(f.length).trim();return y?(Ie.setViewerInfo(l,f,y),{message:`${r}@${l} Set ${f} to "${y}"! üìù`,error:!1}):{message:`${r}@${l} Provide a value for ${f}.`,error:!0}}if(n==="!getinfo"){const h=c||l,f=Ie.getViewerInfo(h);if(!f||Object.keys(f.info).length===0)return{message:`${r}@${l} No info found for ${h}.`,error:!1};const y=Object.entries(f.info).map(([v,T])=>`${v}: ${T}`).join(", ");return{message:`${r}@${l} ${h}'s info: ${y}`,error:!1}}if(n==="!pomopause")return a?(se.pause(),{message:`${r}Timer paused! ‚è∏Ô∏è`,error:!1}):{message:`${r}@${l} Only moderators can control the timer.`,error:!0};if(n==="!pomoresume")return a?(se.resume(),{message:`${r}Timer resumed! ‚ñ∂Ô∏è`,error:!1}):{message:`${r}@${l} Only moderators can control the timer.`,error:!0};if(n==="!pomostop"||n==="!stoptimer")return a?(se.stop(),{message:`${r}Timer stopped! ‚èπÔ∏è`,error:!1}):{message:`${r}@${l} Only moderators can control the timer.`,error:!0};if(n==="!pomoreset")return a?(se.reset(),{message:`${r}Timer reset! All sessions cleared. üîÑ`,error:!1}):{message:`${r}@${l} Only moderators can control the timer.`,error:!0};if(n==="!pomostatus"){const h=se.getState(),f=Math.floor(h.currentSeconds/60),y=h.currentSeconds%60,v=`${f}:${y.toString().padStart(2,"0")}`,T=h.isRunning?"Running":h.isPaused?"Paused":"Stopped";return{message:`${r}Timer: ${T} | ${h.mode} mode | ${v} | Session ${h.currentSession}/${h.totalSessions} üìä`,error:!1}}if(n==="!pomo"||n==="!pomodoro"){if(!a)return{message:`${r}@${l} Only moderators can control the timer.`,error:!0};const h=c.split("/"),f=Math.max(1,parseInt(h[0],10)||25),y=Math.max(1,parseInt(h[1],10)||5),v=Math.max(1,Math.min(12,parseInt(h[2],10)||4));return se.startCycle(f,y,v,(T,_,N)=>{T==="focus"?K.say(`${r}Focus session ${_} complete! Time for a break ‚òï`):T==="break"||T==="longbreak"?K.say(`${r}Break over! Starting session ${_+1}/${N} üí™`):T==="cycle_complete"&&K.say(`${r}Pomodoro cycle complete! ${N} sessions done! üéâ`)}),{message:`${r}Pomodoro started: ${f}m focus / ${y}m break √ó ${v} sessions ‚è±Ô∏è`,error:!1}}return null}function ct(l,e,t={}){const{strategy:s="transform",bounds:i=null,onDragStart:n,onDragEnd:a}=t,r=e||l;let c=!1,u=0,g=0,h=0,f=0,y=0,v=0,T=0,_=0,N={left:l.offsetLeft||0,top:l.offsetTop||0};const X=typeof i=="string"?document.querySelector(i):i;r.style.cursor="move";const ye=j=>{if(j.button===0&&!(j.target instanceof HTMLButtonElement||j.target.closest("button"))){if(c=!0,l.classList.add("dragging"),document.body.classList.add("overlay-dragging"),s==="absolute"){const J=l.getBoundingClientRect(),ce=X?X.getBoundingClientRect():{left:0,top:0};T=j.clientX-J.left,_=j.clientY-J.top,y=J.left-ce.left,v=J.top-ce.top,N={left:y,top:v}}else{const J=window.getComputedStyle(l),ce=new DOMMatrix(J.transform);y=ce.m41,v=ce.m42,h=j.clientX-y,f=j.clientY-v}n==null||n()}},Ge=j=>{if(c)if(j.preventDefault(),s==="absolute"){const J=X?X.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight},ce=l.getBoundingClientRect();let Xe=j.clientX-J.left-T,Qe=j.clientY-J.top-_;const Ns=Math.max(0,J.width-ce.width),js=Math.max(0,J.height-ce.height);Xe=Math.max(0,Math.min(Ns,Xe)),Qe=Math.max(0,Math.min(js,Qe)),l.style.left=`${Math.round(Xe)}px`,l.style.top=`${Math.round(Qe)}px`,N={left:Xe,top:Qe}}else u=j.clientX-h,g=j.clientY-f,y=u,v=g,l.style.transform=`translate(${u}px, ${g}px)`},Lt=()=>{c&&(c=!1,l.classList.remove("dragging"),document.body.classList.remove("overlay-dragging"),s!=="absolute"&&(h=u,f=g),a==null||a({left:Math.round(N.left),top:Math.round(N.top)}))};return r.addEventListener("mousedown",ye),document.addEventListener("mousemove",Ge),document.addEventListener("mouseup",Lt),()=>{r.removeEventListener("mousedown",ye),document.removeEventListener("mousemove",Ge),document.removeEventListener("mouseup",Lt),l.classList.remove("dragging"),document.body.classList.remove("overlay-dragging")}}function Ct(){if(!q)return;const l=document.getElementById("app");if(!l)return;const e=new Set;l.querySelectorAll(".draggable-panel").forEach(s=>{var u;const i=s,n=i.dataset.panel;if(!n||(e.add(n),be.has(n)&&((u=be.get(n))==null||u(),be.delete(n)),getComputedStyle(i).display==="none"))return;const a=Fs[n],r=a?i.querySelector(a):null,c=ct(i,r||i,{strategy:"absolute",bounds:l,onDragEnd:g=>{q.savePanelPosition(q.getCurrentLayout(),n,g)}});be.set(n,c)});const t=[];be.forEach((s,i)=>{e.has(i)||(s(),t.push(i))}),t.forEach(s=>be.delete(s))}window.addEventListener("layoutChanged",()=>Ct());function zs(){const l=document.getElementById("theme-toggle");if(!l)return;let e=!1,t=null;l.addEventListener("click",()=>{e&&t?(t.remove(),t=null,e=!1):(t=Bs(),document.body.appendChild(t),ct(t),e=!0)}),document.addEventListener("click",s=>{const i=s.target;e&&t&&!l.contains(i)&&!t.contains(i)&&(t.remove(),t=null,e=!1)})}function Bs(){const l=document.createElement("div");l.className="theme-menu";const e=de.getCurrentTheme(),t=de.getAvailableThemes();return l.innerHTML=`
		<div class="theme-menu-header" title="Drag to move">
			<span>üé® Themes</span>
			<span class="drag-hint">‚ãÆ‚ãÆ</span>
		</div>
		<div class="theme-list">
			${t.map(s=>`
				<button 
					class="theme-item ${s.name===e?"active":""}"
					data-theme="${s.name}"
				>
					${s.displayName}
				</button>
			`).join("")}
		</div>
	`,l.querySelectorAll(".theme-item").forEach(s=>{s.addEventListener("click",()=>{const i=s.getAttribute("data-theme");de.applyTheme(i),l.querySelectorAll(".theme-item").forEach(n=>n.classList.remove("active")),s.classList.add("active")})}),l}function Rs(){document.addEventListener("keydown",l=>{var e;(l.ctrlKey||l.metaKey)&&l.shiftKey&&l.key==="L"&&(l.preventDefault(),_s()),(l.ctrlKey||l.metaKey)&&l.shiftKey&&l.key==="T"&&(l.preventDefault(),(e=document.getElementById("theme-toggle"))==null||e.click())})}function _s(){const l=document.querySelector(".layout-selector");if(l){l.remove();return}const e=q.createLayoutSelector();document.body.appendChild(e);const t=e.querySelector(".layout-selector-header");t&&ct(e,t)}typeof window<"u"&&(window.debugOverlay={app:Pe,themeManager:de,circularTimer:se,backlogPanel:ue,infoPanel:Ie,layoutManager:q})})();
